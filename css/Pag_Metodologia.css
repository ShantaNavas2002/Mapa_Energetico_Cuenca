/* =================================================================
   ESTILOS EXCLUSIVOS PARA LA SECCIÓN "METODOLOGÍA"
   (No afecta header, footer ni body global)
   ================================================================= */

/* Definimos variables SOLO para este alcance para no romper otros estilos */
.contenedor-principal-metodo {
    --met-bg-card: #8CA69E;      /* Verde grisáceo base */
    --met-bg-dark: #657974;      /* Caja oscura (izq) */
    --met-bg-light: #EBDCC1;     /* Caja clara (der) */
    --met-txt-light: #F3EFE0;    /* Texto claro */
    --met-txt-dark: #505F5B;     /* Texto oscuro */
    
    /* Configuración del contenedor padre (la section) */
    width: 100%;
    min-height: 85vh; /* Altura mínima para que se vea bien en pantalla */
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px;
    box-sizing: border-box;
    background-color: transparent; /* O el color de fondo que desees para el hueco */
}

/* 1. LA TARJETA GRANDE (El contenedor principal redondeado) */
.tarjeta-img-metodo {
    width: 100%;
    max-width: 1400px; /* Ancho máximo para pantallas grandes */
    height: 80vh;      /* Altura fija relativa al viewport */
    background-color: var(--met-bg-card);
    border-radius: 30px;
    position: relative;
    overflow: hidden; /* Para que la imagen de fondo no se salga */
    box-shadow: 0 15px 40px rgba(0,0,0,0.3); /* Sombra para dar profundidad */
}

/* Imagen de fondo decorativa (opacidad baja) */
.imagen-contenedor-metodo {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
}
.imagen-contenedor-metodo img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0.05; /* Muy sutil */
}

/* 2. GRILLA INTERNA (Layout de los elementos) */
/* =========================================
   2. GRILLA INTERNA (Ajuste 50/50)
   ========================================= */
.contenedor-metodo {
    position: relative;
    z-index: 2;
    height: 100%;
    padding: 40px 50px;
    box-sizing: border-box;
    display: grid;
    
    grid-template-areas: 
        "cabecera cabecera"
        "izq der"
        "nav nav";
        
    /* --- AQUÍ ESTÁ EL CAMBIO --- */
    /* 1fr 1fr significa: dos columnas de igual tamaño (50% cada una) */
    grid-template-columns: 1fr 1fr; 
    
    grid-template-rows: auto 1fr auto; 
    column-gap: 40px;
    row-gap: 50px; 
}

/* El item-b ya no existe, puedes borrar la regla .titulo-tema.item-b */

/* 3. CABECERA SUPERIOR (Pastilla + Introducción) */
.header-superior.item-a {
    grid-area: cabecera;
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
}

/* Pastilla "METODOLOGÍA" */
#seccion-pill {
    background-color: rgba(0, 0, 0, 0.15); /* Oscuro semitransparente */
    color: #dfdfdf;
    padding: 8px 30px;
    border-radius: 50px;
    font-family: 'Roboto', sans-serif;
    font-size: 1.5rem;
    font-weight: 300;
    letter-spacing: 2px;
    text-transform: uppercase;
}

/* Texto Derecha "Introducción" */
#fase-txt {
    font-family: 'Roboto', sans-serif;
    font-size: 2rem;
    color: #aabcb6; /* Color gris suave */
    font-weight: 300;
}

/* 4. TÍTULO DEL TEMA (Ej: Estructura Metodológica) */
.titulo-tema.item-b {
    grid-area: titulo;
    font-family: 'Roboto', sans-serif;
    font-size: 1.8rem;
    color: #d1bfa3; /* Beige suave similar a la imagen */
    margin: 0 0 10px 0;
    font-weight: 400;
}

/* 5. CONTENEDORES DE CONTENIDO (Layout) */
.item-c { grid-area: izq; }
.item-d { grid-area: der; }

/* Limpieza de estilos por defecto para que no molesten */
.item-c, .item-d {
    position: relative !important; /* Necesario para que el título absoluto se ubique respecto a esto */
    background: transparent !important;
    padding: 0 !important;
    border: none !important;
    box-shadow: none !important;
    display: flex;
    flex-direction: column;
    height: 100%; /* Fuerza a ocupar toda la altura de la grilla */
    min-height: 0; /* Truco de Flexbox/Grid para permitir scroll interno */
}

/* TÍTULOS FLOTANTES (Truco para alineación perfecta) */
.titulo-externo-recuadro {
    position: absolute; /* Lo sacamos del flujo */
    top: -35px;         /* Lo subimos 35px sobre la caja */
    left: 0;
    width: 100%;
    
    font-family: 'Roboto', sans-serif;
    font-size: 1.1rem;
    color: var(--met-txt-light);
    font-weight: 500;
    margin: 0;
    white-space: nowrap;      /* Evita que salte de línea si es posible */
    overflow: hidden;
    text-overflow: ellipsis;  /* Puntos suspensivos si es muy largo */
}

/* 6. ESTILOS DE LAS CAJAS INTERNAS (Colores de fondo) */
.caja-contenido-estilo {
    border-radius: 20px;
    padding: 30px;
    height: 100%;
    width: 100%;
    box-sizing: border-box;
    overflow-y: auto; 
    
    /* --- AGREGA ESTO PARA EL SCROLL --- */
    /* Le dice al navegador: "El scroll muere aquí, no lo pases al padre" */
    overscroll-behavior-y: contain; 
    
    font-family: 'Roboto', sans-serif;
    line-height: 1.5;
}

.caja-contenido-estilo::-webkit-scrollbar {
    width: 8px; /* Ancho delgado pero visible */
}

.caja-contenido-estilo::-webkit-scrollbar-track {
    background: transparent; /* Fondo del riel invisible */
    margin-top: 20px;       /* Margen para que no pegue con los bordes redondeados */
    margin-bottom: 20px;
}

.caja-contenido-estilo::-webkit-scrollbar-thumb {
    background-color: rgba(0, 0, 0, 0.2); /* Color oscuro semitransparente */
    border-radius: 10px;       /* Redondeado */
    border: 2px solid transparent; /* Truco para dar "padding" al scrollbar */
    background-clip: content-box;
}

/* Hover sobre el scrollbar para que se note más al usarlo */
.caja-contenido-estilo::-webkit-scrollbar-thumb:hover {
    background-color: rgba(0, 0, 0, 0.4);
}
/* Caja Izquierda: OSCURA */
#izq-imgOtxt .caja-contenido-estilo {
    background-color: var(--met-bg-dark);
    color: var(--met-txt-light);
    font-size: 0.95rem;
}

/* Caja Derecha: CLARA (Beige) */
#der-imgOtxt .caja-contenido-estilo {
    background-color: var(--met-bg-light);
    color: var(--met-txt-dark);
    font-size: 0.95rem;
}

/* Ajustes de imágenes dentro de las cajas */
.caja-contenido-estilo img {
    width: 100%;
    height: auto;
    border-radius: 10px;
    display: block;
}

/* 7. BARRA DE NAVEGACIÓN (Inferior) */
#barra-nav.item-e {
    grid-area: nav;
    width: 90%;
    margin: 0 auto;
    
    /* AQUI ESTA EL PADDING EXTRA QUE PEDISTE */
    margin-top: 30px; /* Aleja la barra de los contenidos */
    
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    padding-top: 10px;
    padding-bottom: 20px;
    position: relative;
}

/* Contenedor de cada GRUPO (Fase) */
.grupo-nav {
    flex: 1;                /* Cada fase ocupa el mismo espacio proporcional */
    display: flex;
    flex-direction: column;
    align-items: center;    /* Centra el texto */
    position: relative;
    margin: 0 2px;          /* Pequeño espacio entre fases */
}

/* Texto de la Fase (Arriba) */
.titulo-fase-nav {
    font-family: 'Roboto', sans-serif;
    font-size: 0.75rem;     /* Texto pequeño */
    color: var(--met-txt-light);
    text-transform: uppercase;
    text-align: center;
    margin-bottom: 8px;     /* Espacio entre texto y barra */
    opacity: 0.5;           /* Por defecto semitransparente */
    transition: opacity 0.3s;
    
    /* Para manejar textos largos */
    white-space: normal;
    max-width: 100%;
    line-height: 1.2;
    height: 30px;           /* Altura fija para alinear todo */
    display: flex;
    align-items: flex-end;  /* Texto pegado abajo */
    justify-content: center;
}

/* La barra contenedora de segmentos */
.barra-progreso-fase {
    width: 100%;
    display: flex;
    height: 6px;            /* Grosor de la línea */
    background-color: rgba(255, 255, 255, 0.2); /* Fondo de la línea inactiva */
    border-radius: 3px;
    overflow: hidden;
}

/* Cada segmento individual (diapositiva) dentro de la fase */
.segmento-nav {
    flex: 1;                /* Se reparten el espacio de la fase */
    height: 100%;
    border: none;
    background-color: transparent;
    cursor: pointer;
    border-right: 1px solid rgba(0,0,0,0.2); /* Separador sutil entre pasos */
    padding: 0;
    transition: background-color 0.3s;
}

.segmento-nav:last-child {
    border-right: none;
}

/* --- ESTADOS ACTIVOS --- */

/* Cuando la fase está activa (o ya pasó) */
.grupo-nav.fase-activa .titulo-fase-nav {
    opacity: 1;
    font-weight: bold;
    color: var(--met-bg-light); /* Color beige destacado */
}

/* Segmento actual o vistos */
.segmento-nav.activo {
    background-color: var(--met-bg-light); /* Beige activo */
}

.segmento-nav:hover {
    background-color: rgba(235, 220, 193, 0.5);
}

/* Eliminamos los botones de flecha antiguos del flujo visual principal si deseas */
.btn-nav-flotante {
    background: none;
    border: none;
    color: var(--met-txt-light);
    font-size: 1.5rem;
    cursor: pointer;
    padding: 0 15px;
}

/* =========================================
   8. ESTILOS ESPECIALES: SOLO IMAGEN
   (Centrado perfecto, sin scroll, 90%)
   ========================================= */

/* Cuando la caja tiene la clase 'modo-solo-imagen' (agregada por JS) */
.caja-contenido-estilo.modo-solo-imagen {
    display: flex;              /* Flexbox para centrar */
    justify-content: center;    /* Centrado Horizontal */
    align-items: center;        /* Centrado Vertical */
    overflow: hidden;           /* DESACTIVA EL SCROLL */
    padding: 0;                 /* Quitamos padding para tener control total */
}

/* Estilo de la imagen dentro de esta caja especial */
.caja-contenido-estilo.modo-solo-imagen img {
    width: auto;
    height: auto;
    
    /* El truco del 90% sin distorsión */
    max-width: 90%;
    max-height: 90%;
    object-fit: contain; /* Asegura que la imagen entera se vea sin estirarse */
    
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2); /* Sombra elegante para resaltar */
}


/* =========================================
   9. ESTILOS DE TABLAS
   (Diseño limpio y adaptable a fondo claro/oscuro)
   ========================================= */

.contenido-tabla {
    width: 100%;
    overflow-x: auto; /* Scroll horizontal si la tabla es muy ancha */
    margin-top: 10px;
}

.tabla-datos {
    width: 100%;
    border-collapse: collapse; /* Elimina espacios entre bordes */
    font-family: 'Roboto', sans-serif;
    font-size: 0.9em;
}

/* Encabezados (TH) */
.tabla-datos th {
    text-align: left;
    padding: 12px 15px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    opacity: 0.8;
    border-bottom: 2px solid currentColor; /* Usa el color de texto actual como borde */
}

/* Celdas (TD) */
.tabla-datos td {
    padding: 12px 15px;
    border-bottom: 1px solid rgba(120, 120, 120, 0.2); /* Línea divisoria sutil */
    vertical-align: top;
}

/* Filas (TR) - Efecto hover suave */
.tabla-datos tbody tr:hover {
    background-color: rgba(255, 255, 255, 0.1); /* Ilumina ligeramente al pasar el mouse */
}

/* Quitar borde a la última fila */
.tabla-datos tr:last-child td {
    border-bottom: none;
}

/* Ajuste específico para superíndices en tablas (m2, etc.) */
.tabla-datos sup {
    font-size: 0.7em;
}

/* Clase utilitaria para quitar sombras a imágenes específicas (ej. diagramas o logos) */
img.sin-sombra {
    box-shadow: none !important;
    filter: none !important; /* Por si acaso tengas filtros */
}